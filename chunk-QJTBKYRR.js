import{a as ne}from"./chunk-KYDLVRIQ.js";import{a as ue}from"./chunk-B52FSEI7.js";import{a as de,b as pe,c as ce,d as ge}from"./chunk-G6B6AZSJ.js";import"./chunk-VDWCKEYE.js";import"./chunk-5U2JP7Y3.js";import{a as oe,b as ae,c as le}from"./chunk-3CQKWVPW.js";import"./chunk-Z2JUUHCF.js";import{d as ie,e as re,f as se,g as me}from"./chunk-L44P52BQ.js";import{e as k}from"./chunk-SSQJ3YUY.js";import{b as ee,c as te}from"./chunk-JLPIB5B6.js";import"./chunk-X4SNFC5H.js";import{a as K,b as Q}from"./chunk-BS5ZSUXQ.js";import{A as Z,e as V,i as j,n as J,y as X,z as Y}from"./chunk-RWOU77EA.js";import"./chunk-XSSXK7EZ.js";import{b as U,d as $,e as z,g as H,l as G}from"./chunk-RRIUMA4F.js";import"./chunk-LLONOUOZ.js";import"./chunk-LPI7DW4Z.js";import"./chunk-2AQ67VSH.js";import{$a as N,Ab as W,Bb as T,Ca as a,Cb as A,Kb as E,Lb as M,Ta as C,V as h,Va as d,Ya as D,Z as O,ab as B,bb as L,cb as r,db as t,eb as x,ha as p,ia as c,ib as v,jb as _,kb as g,pc as R,rb as b,sb as s,tb as S,uc as q,wb as w,xb as P,yb as I,zb as F}from"./chunk-QG64PWEM.js";var ye=()=>({width:"100%",right:"0",left:"0"}),fe=n=>({"920px":n}),_e=()=>({width:"50rem",height:"35rem"}),Ce=()=>[5,10,15,20,30],be=()=>({"min-width":"50rem"});function ve(n,m){n&1&&(r(0,"span",34),s(1,"Update Parent Category Information."),t())}function he(n,m){n&1&&(r(0,"span",34),s(1,"Add Parent Category Information."),t())}function xe(n,m){if(n&1){let l=v();r(0,"div",35)(1,"label",36),s(2,"Category Id"),t(),r(3,"input",37),I("ngModelChange",function(i){p(l);let o=g();return P(o.categoryObj.categoryId,i)||(o.categoryObj.categoryId=i),c(i)}),t()()}if(n&2){let l=g();a(3),w("ngModel",l.categoryObj.categoryId),d("disabled",!0)}}function Se(n,m){n&1&&(r(0,"small",38),s(1,"Category Name is required"),t())}function we(n,m){n&1&&(r(0,"small",38),s(1,"Department is required"),t())}function Pe(n,m){if(n&1){let l=v();r(0,"p-button",39),_("onClick",function(){p(l);let i=g();return c(i.addPcategory())}),t()}if(n&2){g();let l=b(27),e=b(33);d("disabled",l.invalid||e.invalid)}}function Ie(n,m){if(n&1){let l=v();r(0,"p-button",40),_("onClick",function(){p(l);let i=g();return c(i.updatePcategory())}),t()}if(n&2){g();let l=b(27),e=b(33);d("disabled",l.invalid||e.invalid)}}function Te(n,m){n&1&&(r(0,"tr")(1,"th"),s(2,"S.NO"),t(),r(3,"th",41),s(4,"Category Id "),x(5,"p-sortIcon",42),t(),r(6,"th",43),s(7,"Category Name "),x(8,"p-sortIcon",44),t(),r(9,"th",45),s(10,"Department "),x(11,"p-sortIcon",46),t(),r(12,"th"),s(13,"Action"),t()())}function Ee(n,m){if(n&1&&(r(0,"td"),s(1),E(2,"na"),t()),n&2){let l=g().$implicit;a(),S(M(2,1,l.name))}}function Me(n,m){if(n&1&&C(0,Ee,3,3,"td",49),n&2){let l=m.$implicit,e=g().$implicit;d("ngIf",l.id===e.deptId)}}function ke(n,m){if(n&1){let l=v();r(0,"tr")(1,"td"),s(2),t(),r(3,"td"),s(4),E(5,"na"),t(),r(6,"td"),s(7),E(8,"na"),t(),B(9,Me,1,1,"td",null,N),r(11,"td")(12,"button",47),_("click",function(){let i=p(l).$implicit,o=g();return c(o.editPcategory(i))}),t(),r(13,"button",48),_("click",function(){let i=p(l).$implicit,o=g();return c(o.deletePcategory(i._id))}),t()()()}if(n&2){let l=m.$implicit,e=m.rowIndex,i=g();a(2),S(e+1),a(2),S(M(5,5,l.categoryId)),a(3),S(M(8,7,l.categoryName)),a(2),L(i.deptList$),a(3),d("text",!0),a(),d("text",!0)}}var nt=(()=>{let m=class m{constructor(){this.deptList$=[],this.pcategoryList=[],this.categoryObj=new k,this.isvisable=!1,this.pcategory=h(ue),this.dept=h(ne),this.messageService=h(j),this.confirmationService=h(V)}ngOnInit(){this.getPCategory(),this.getDept()}newCategory(){this.categoryObj=new k,this.isvisable=!0}reset(){this.categoryObj=new k}getDept(){this.dept.getDept().subscribe(e=>{e.result?this.deptList$=e.data.map(i=>({id:i._id,name:i.deptName})):console.log(e.message)})}getPCategory(){this.pcategory.getParentCategories().subscribe(e=>{e.result?this.pcategoryList=e.data:console.log(e.message)})}addPcategory(){this.pcategory.createParentCategory(this.categoryObj).subscribe({next:e=>{e.result?(this.messageService.add({severity:"success",summary:"success",detail:"Parent Category Added Successfully"}),this.isvisable=!1,this.getPCategory()):this.messageService.add({severity:"error",summary:"error",detail:e.message})},error:e=>{if(this.messageService.add({severity:"error",summary:"error",detail:e.error.message}),e.error.data)for(let i of e.error.data)this.messageService.add({severity:"error",summary:"error",detail:i.msg+" "+i.path})}})}editPcategory(e){this.isvisable=!0,this.categoryObj=e}updatePcategory(){this.pcategory.updateParentCategory(this.categoryObj).subscribe({next:e=>{e.result?(this.messageService.add({severity:"success",summary:"success",detail:"Parent Category Updated Successfully"}),this.isvisable=!1,this.getPCategory()):this.messageService.add({severity:"error",summary:"error",detail:e.message})},error:e=>{if(this.messageService.add({severity:"error",summary:"error",detail:e.error.message}),e.error.data)for(let i of e.error.data)this.messageService.add({severity:"error",summary:"error",detail:i.msg+" "+i.path})}})}deletePcategory(e){this.confirmationService.confirm({message:"Are you sure you want to delete this Parent Category?",header:"Confirm",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.pcategory.deleteParentCategory(e).subscribe({next:i=>{i.result?(this.messageService.add({severity:"success",summary:"success",detail:"Parent Category Deleted Successfully"}),this.getPCategory()):this.messageService.add({severity:"error",summary:"error",detail:i.message})},error:i=>{if(this.messageService.add({severity:"error",summary:"error",detail:i.error.message}),i.error.data)for(let o of i.error.data)this.messageService.add({severity:"error",summary:"error",detail:o.msg+" "+o.path})}})},reject:()=>{this.messageService.add({severity:"info",summary:"info",detail:"Delete cancelled"})}})}};m.\u0275fac=function(i){return new(i||m)},m.\u0275cmp=O({type:m,selectors:[["app-parent-category"]],standalone:!0,features:[F([j,V]),W],decls:45,vars:31,consts:[["name","ngModel"],["dept","ngModel"],[3,"breakpoints"],[1,"col-md-12","flex","flex-row","align-item-center","justify-content-between"],[1,"flex","flex-column","gap-2"],[1,"text-900","font-medium","text-3xl"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/pages/dashboard",1,"text-decoration-none","text-900","font-medium"],["routerLink","/pages/parent-category",1,"text-decoration-none","text-900","font-medium"],["aria-current","page",1,"breadcrumb-item","active"],[1,"flex","flex-row","gap-2","mt-4"],["label","Add Category","icon","pi pi-plus",1,"d-none","d-sm-none","d-md-block",3,"onClick","raised"],["icon","pi pi-plus",1,"d-md-none","d-sm-block",3,"onClick","raised"],["header","Parent Category","draggable","false","resizable","false",3,"visibleChange","modal","visible"],["class","p-text-secondary block mb-5",4,"ngIf"],["class","flex align-items-center gap-3 mb-3 ",4,"ngIf"],[1,"flex","align-items-center","gap-3","mb-5"],["for","categoryName",1,"font-semibold","w-6rem"],["pInputText","","id","categoryName","autocomplete","off","name","categoryName","ngModel","","required","",1,"flex-auto",3,"ngModelChange","ngModel"],["class","p-error",4,"ngIf"],["id","p-dropdown",1,"flex","align-items-center","gap-3","mb-5"],["htmlFor","department",1,"font-semibold","w-6rem"],["id","department","placeholder","Select Department","optionLabel","name","optionValue","id","filterBy","name","ngModel","","required","",1,"flex-auto",3,"ngModelChange","ngModel","filter","options"],[1,"flex","justify-content-end","gap-2"],["label","Reset","severity","secondary",3,"onClick"],["label","Save",3,"disabled","onClick",4,"ngIf"],["label","Update",3,"disabled","onClick",4,"ngIf"],[1,"col-md-12"],[1,"row"],[1,"col-12","d-print-none"],["styleClass","p-datatable","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","first","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"p-text-secondary","block","mb-5"],[1,"flex","align-items-center","gap-3","mb-3"],["for","categoryId",1,"font-semibold","w-6rem"],["pInputText","","id","categoryId","autocomplete","off","name","categoryId",1,"flex-auto",3,"ngModelChange","ngModel","disabled"],[1,"p-error"],["label","Save",3,"onClick","disabled"],["label","Update",3,"onClick","disabled"],["pSortableColumn","categoryId","feild","categoryId"],["field","categoryId"],["pSortableColumn","categoryName","feild","categoryName"],["field","categoryName"],["pSortableColumn","deptId","feild","deptId"],["field","deptId"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-secondary",3,"click","text"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click","text"],[4,"ngIf"]],template:function(i,o){if(i&1){let y=v();r(0,"main"),x(1,"p-toast",2)(2,"p-confirmDialog"),r(3,"div",3)(4,"div",4)(5,"span",5),s(6,"Parent Categories"),t(),r(7,"ol",6)(8,"li",7)(9,"a",8),s(10,"Home"),t()(),r(11,"li",7)(12,"a",9),s(13,"Parent Categories"),t()(),r(14,"li",10),s(15,"List"),t()()(),r(16,"div",11)(17,"p-button",12),_("onClick",function(){return p(y),c(o.newCategory())}),t(),r(18,"p-button",13),_("onClick",function(){return p(y),c(o.newCategory())}),t(),r(19,"p-dialog",14),I("visibleChange",function(u){return p(y),P(o.isvisable,u)||(o.isvisable=u),c(u)}),C(20,ve,2,0,"span",15)(21,he,2,0,"span",15)(22,xe,4,2,"div",16),r(23,"div",17)(24,"label",18),s(25,"Category Name"),t(),r(26,"input",19,0),I("ngModelChange",function(u){return p(y),P(o.categoryObj.categoryName,u)||(o.categoryObj.categoryName=u),c(u)}),t(),C(28,Se,2,0,"small",20),t(),r(29,"div",21)(30,"label",22),s(31,"Department"),t(),r(32,"p-dropdown",23,1),I("ngModelChange",function(u){return p(y),P(o.categoryObj.deptId,u)||(o.categoryObj.deptId=u),c(u)}),t(),C(34,we,2,0,"small",20),t(),r(35,"div",24)(36,"p-button",25),_("onClick",function(){return p(y),c(o.reset())}),t(),C(37,Pe,1,1,"p-button",26)(38,Ie,1,1,"p-button",27),t()()()(),r(39,"div",28)(40,"div",29)(41,"div",30)(42,"p-table",31),C(43,Te,14,0,"ng-template",32)(44,ke,14,9,"ng-template",33),t()()()()()}if(i&2){let y=b(27),f=b(33);a(),d("breakpoints",A(26,fe,T(25,ye))),a(16),d("raised",!0),a(),d("raised",!0),a(),D(T(28,_e)),d("modal",!0),w("visible",o.isvisable),a(),d("ngIf",o.categoryObj._id!==""),a(),d("ngIf",o.categoryObj._id===""),a(),d("ngIf",o.categoryObj._id!==""),a(4),w("ngModel",o.categoryObj.categoryName),a(2),d("ngIf",y.invalid&&(y.dirty||y.touched)),a(4),w("ngModel",o.categoryObj.deptId),d("filter",!0)("options",o.deptList$),a(2),d("ngIf",f.invalid&&(f.dirty||f.touched)),a(3),d("ngIf",o.categoryObj._id===""),a(),d("ngIf",o.categoryObj._id!==""),a(4),d("value",o.pcategoryList)("paginator",!0)("first",0)("showCurrentPageReport",!0)("rows",10)("rowsPerPageOptions",T(29,Ce))("tableStyle",T(30,be))}},dependencies:[q,R,Z,X,Y,J,Q,K,oe,ge,de,pe,ce,re,ie,G,U,$,H,z,te,ee,me,se,le,ae]});let n=m;return n})();export{nt as ParentCategoryComponent};
